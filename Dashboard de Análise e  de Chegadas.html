<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard de Análise de Chegadas</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #0F172A; /* Cor de fundo slate-900 (mais escura) */
        }
        .chart-container {
            position: relative;
            height: 350px;
            width: 100%;
        }
        .kpi-card {
            transition: all 0.3s ease;
            background-color: #1E293B; /* Cor dos cards slate-800 (mais contraste) */
            border: 1px solid #334155; /* Cor da borda slate-700 */
        }
        .kpi-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 0 20px rgba(220, 38, 38, 0.2);
        }
        .month-card.active {
            background-color: #DC2626; /* red-600 */
            border-color: #F87171; /* red-400 */
            color: white;
        }
        .month-card.active h3, .month-card.active p {
            color: white;
        }
        /* Estilos para o acordeão da tabela */
        .table-accordion-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.5s ease-out;
        }
        .table-accordion-item.active .table-accordion-content {
            max-height: 500px; /* Altura suficiente para a tabela */
        }
        .table-accordion-item.active .chevron {
            transform: rotate(180deg);
        }
        .chevron {
            transition: transform 0.3s ease-in-out;
        }
        /* Estilos das Abas */
        .tab {
            cursor: pointer;
            padding: 10px 20px;
            border-bottom: 2px solid transparent;
            transition: all 0.3s ease;
        }
        .tab.active {
            color: #EF4444; /* red-500 */
            border-bottom-color: #EF4444;
        }
        .tab-content {
            display: none;
        }
        .tab-content.active {
            display: block;
        }
    </style>
</head>
<body class="text-slate-200"> <!-- Texto base um pouco mais claro -->

    <div class="container mx-auto p-4 sm:p-8">
        
        <!-- Abas de Navegação -->
        <div class="flex border-b border-slate-700 mb-8">
            <div class="tab active" data-tab="multi">Multi</div>
            <div class="tab" data-tab="eletrik">Eletrik</div>
        </div>

        <!-- Conteúdo da Aba Multi -->
        <div id="multi" class="tab-content active">
            <header class="mb-10 flex justify-between items-center">
                <div>
                    <h1 class="text-5xl font-extrabold text-white tracking-tight">Dashboard de Análise de Chegadas - Multi</h1>
                    <p class="text-slate-400 mt-2">Resumo de Janeiro a Maio de 2025</p>
                </div>
                <img src="https://empresas.tramontina.com.br/webruntime/org-asset/ef4c16ca4b/resource/0818c0000030FTI" alt="Logo da Tramontina" class="h-20" onerror="this.onerror=null;this.src='https://placehold.co/240x80/0F172A/ffffff?text=Tramontina';"> <!-- Logo maior -->
            </header>

            <section class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 mb-8 text-center">
                <div class="kpi-card p-6 rounded-xl">
                    <h2 class="text-sm font-medium text-slate-400">Total de Chegadas</h2>
                    <p id="kpi-total-multi" class="text-4xl font-bold text-white mt-2">0</p>
                </div>
                <div class="kpi-card p-6 rounded-xl">
                    <h2 class="text-sm font-medium text-slate-400">Média Mensal</h2>
                    <p id="kpi-media-mensal-multi" class="text-4xl font-bold text-white mt-2">0</p>
                </div>
                <div class="kpi-card p-6 rounded-xl">
                    <h2 class="text-sm font-medium text-slate-400">Média Diária</h2>
                    <p id="kpi-media-diaria-multi" class="text-4xl font-bold text-white mt-2">0</p>
                </div>
                <div class="kpi-card p-6 rounded-xl">
                    <h2 class="text-sm font-medium text-slate-400">Mês com Mais Chegadas</h2>
                    <p id="kpi-mes-pico-multi" class="text-4xl font-bold text-white mt-2">-</p>
                </div>
            </section>

            <section class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-4 mb-8" id="month-cards-container-multi">
                <!-- Cartões dos meses serão inseridos aqui -->
            </section>

            <section class="grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8">
                <div class="kpi-card p-6 rounded-xl"> <!-- Classe kpi-card para consistência -->
                    <h2 class="text-lg font-semibold text-white mb-4">Chegadas por Mês</h2>
                    <div class="chart-container">
                        <canvas id="monthlyChart-multi"></canvas>
                    </div>
                </div>
                <div class="kpi-card p-6 rounded-xl"> <!-- Classe kpi-card para consistência -->
                    <h2 class="text-lg font-semibold text-white mb-4">Chegadas Diárias - <span id="daily-chart-month-multi">Janeiro</span></h2>
                    <div class="chart-container">
                        <canvas id="dailyChart-multi"></canvas>
                    </div>
                </div>
            </section>

            <section class="kpi-card rounded-xl table-accordion-item"> <!-- Classe kpi-card para consistência -->
                 <div id="table-accordion-header-multi" class="flex justify-between items-center p-6 cursor-pointer">
                    <h2 class="text-lg font-semibold text-white">Dados Detalhados - <span id="table-month-multi">Janeiro</span></h2>
                    <svg class="chevron w-6 h-6 text-slate-400" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="m19.5 8.25-7.5 7.5-7.5-7.5" /></svg>
                </div>
                <div class="table-accordion-content px-6 pb-6">
                    <div class="overflow-x-auto max-h-80">
                        <table class="w-full text-left">
                            <thead class="border-b border-slate-600 text-slate-400 sticky top-0 bg-slate-800">
                                <tr>
                                    <th class="p-2">Data</th>
                                    <th class="p-2">Nº de Chegadas</th>
                                </tr>
                            </thead>
                            <tbody id="details-table-multi"></tbody>
                        </table>
                    </div>
                </div>
            </section>
        </div>

        <!-- Conteúdo da Aba Eletrik -->
        <div id="eletrik" class="tab-content">
            <header class="mb-10 flex justify-between items-center">
                <div>
                    <h1 class="text-5xl font-extrabold text-white tracking-tight">Dashboard de Análise de Chegadas - Eletrik</h1>
                    <p class="text-slate-400 mt-2">Resumo de Janeiro a Maio de 2025</p>
                </div>
                <img src="https://empresas.tramontina.com.br/webruntime/org-asset/ef4c16ca4b/resource/0818c0000030FTI" alt="Logo da Tramontina" class="h-20" onerror="this.onerror=null;this.src='https://placehold.co/240x80/0F172A/ffffff?text=Tramontina';"> <!-- Logo maior -->
            </header>
            
             <section class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 mb-8 text-center">
                <div class="kpi-card p-6 rounded-xl">
                    <h2 class="text-sm font-medium text-slate-400">Total de Chegadas</h2>
                    <p id="kpi-total-eletrik" class="text-4xl font-bold text-white mt-2">0</p>
                </div>
                <div class="kpi-card p-6 rounded-xl">
                    <h2 class="text-sm font-medium text-slate-400">Média Mensal</h2>
                    <p id="kpi-media-mensal-eletrik" class="text-4xl font-bold text-white mt-2">0</p>
                </div>
                <div class="kpi-card p-6 rounded-xl">
                    <h2 class="text-sm font-medium text-slate-400">Média Diária</h2>
                    <p id="kpi-media-diaria-eletrik" class="text-4xl font-bold text-white mt-2">0</p>
                </div>
                <div class="kpi-card p-6 rounded-xl">
                    <h2 class="text-sm font-medium text-slate-400">Mês com Mais Chegadas</h2>
                    <p id="kpi-mes-pico-eletrik" class="text-4xl font-bold text-white mt-2">-</p>
                </div>
            </section>

            <section class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-4 mb-8" id="month-cards-container-eletrik">
            </section>

            <section class="grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8">
                <div class="kpi-card p-6 rounded-xl"> <!-- Classe kpi-card para consistência -->
                    <h2 class="text-lg font-semibold text-white mb-4">Chegadas por Mês</h2>
                    <div class="chart-container">
                        <canvas id="monthlyChart-eletrik"></canvas>
                    </div>
                </div>
                <div class="kpi-card p-6 rounded-xl"> <!-- Classe kpi-card para consistência -->
                    <h2 class="text-lg font-semibold text-white mb-4">Chegadas Diárias - <span id="daily-chart-month-eletrik">Janeiro</span></h2>
                    <div class="chart-container">
                        <canvas id="dailyChart-eletrik"></canvas>
                    </div>
                </div>
            </section>

            <section class="kpi-card rounded-xl table-accordion-item"> <!-- Classe kpi-card para consistência -->
                 <div id="table-accordion-header-eletrik" class="flex justify-between items-center p-6 cursor-pointer">
                    <h2 class="text-lg font-semibold text-white">Dados Detalhados - <span id="table-month-eletrik">Janeiro</span></h2>
                    <svg class="chevron w-6 h-6 text-slate-400" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="m19.5 8.25-7.5 7.5-7.5-7.5" /></svg>
                </div>
                <div class="table-accordion-content px-6 pb-6">
                    <div class="overflow-x-auto max-h-80">
                        <table class="w-full text-left">
                            <thead class="border-b border-slate-600 text-slate-400 sticky top-0 bg-slate-800">
                                <tr>
                                    <th class="p-2">Data</th>
                                    <th class="p-2">Nº de Chegadas</th>
                                </tr>
                            </thead>
                            <tbody id="details-table-eletrik"></tbody>
                        </table>
                    </div>
                </div>
            </section>
        </div>

    </div>

    <script>
        const multiData = {
            resumoMensal: [
                { nome: "Janeiro", totalChegadas: 695 }, { nome: "Fevereiro", totalChegadas: 1185 }, { nome: "Março", totalChegadas: 1170 }, { nome: "Abril", totalChegadas: 1204 }, { nome: "Maio", totalChegadas: 1268 },
            ],
            detalhesMensais: {
                Janeiro: [ { data: "2025-01-07", chegadas: 2 }, { data: "2025-01-08", chegadas: 4 }, { data: "2025-01-09", chegadas: 5 }, { data: "2025-01-10", chegadas: 7 }, { data: "2025-01-13", chegadas: 21 }, { data: "2025-01-14", chegadas: 21 }, { data: "2025-01-15", chegadas: 30 }, { data: "2025-01-16", chegadas: 39 }, { data: "2025-01-17", chegadas: 45 }, { data: "2025-01-20", chegadas: 49 }, { data: "2025-01-21", chegadas: 42 }, { data: "2025-01-22", chegadas: 60 }, { data: "2025-01-23", chegadas: 68 }, { data: "2025-01-24", chegadas: 45 }, { data: "2025-01-25", chegadas: 3 }, { data: "2025-01-27", chegadas: 69 }, { data: "2025-01-28", chegadas: 57 }, { data: "2025-01-29", chegadas: 59 }, { data: "2025-01-30", chegadas: 57 }, { data: "2025-01-31", chegadas: 12 } ],
                Fevereiro: [ { data: "2025-02-03", chegadas: 95 }, { data: "2025-02-04", chegadas: 60 }, { data: "2025-02-05", chegadas: 62 }, { data: "2025-02-06", chegadas: 60 }, { data: "2025-02-07", chegadas: 58 }, { data: "2025-02-10", chegadas: 75 }, { data: "2025-02-11", chegadas: 52 }, { data: "2025-02-12", chegadas: 58 }, { data: "2025-02-13", chegadas: 52 }, { data: "2025-02-14", chegadas: 61 }, { data: "2025-02-17", chegadas: 61 }, { data: "2025-02-18", chegadas: 51 }, { data: "2025-02-19", chegadas: 60 }, { data: "2025-02-20", chegadas: 53 }, { data: "2025-02-21", chegadas: 52 }, { data: "2025-02-24", chegadas: 78 }, { data: "2025-02-25", chegadas: 58 }, { data: "2025-02-26", chegadas: 56 }, { data: "2025-02-27", chegadas: 76 }, { data: "2025-02-28", chegadas: 7 } ],
                Março: [ { data: "2025-03-03", chegadas: 69 }, { data: "2025-03-04", chegadas: 35 }, { data: "2025-03-05", chegadas: 67 }, { data: "2025-03-06", chegadas: 59 }, { data: "2025-03-07", chegadas: 69 }, { data: "2025-03-10", chegadas: 63 }, { data: "2025-03-11", chegadas: 61 }, { data: "2025-03-12", chegadas: 58 }, { data: "2025-03-13", chegadas: 65 }, { data: "2025-03-14", chegadas: 59 }, { data: "2025-03-17", chegadas: 72 }, { data: "2025-03-18", chegadas: 51 }, { data: "2025-03-19", chegadas: 43 }, { data: "2025-03-20", chegadas: 51 }, { data: "2025-03-21", chegadas: 59 }, { data: "2025-03-24", chegadas: 68 }, { data: "2025-03-25", chegadas: 57 }, { data: "2025-03-26", chegadas: 49 }, { data: "2025-03-27", chegadas: 40 }, { data: "2025-03-28", chegadas: 69 }, { data: "2025-03-29", chegadas: 4 }, { data: "2025-03-31", chegadas: 2 } ],
                Abril: [ { data: "2025-04-01", chegadas: 87 }, { data: "2025-04-02", chegadas: 56 }, { data: "2025-04-03", chegadas: 55 }, { data: "2025-04-04", chegadas: 67 }, { data: "2025-04-05", chegadas: 1 }, { data: "2025-04-07", chegadas: 68 }, { data: "2025-04-08", chegadas: 49 }, { data: "2025-04-09", chegadas: 71 }, { data: "2025-04-10", chegadas: 66 }, { data: "2025-04-11", chegadas: 59 }, { data: "2025-04-12", chegadas: 2 }, { data: "2025-04-14", chegadas: 64 }, { data: "2025-04-15", chegadas: 60 }, { data: "2025-04-16", chegadas: 67 }, { data: "2025-04-17", chegadas: 66 }, { data: "2025-04-21", chegadas: 8 }, { data: "2025-04-22", chegadas: 59 }, { data: "2025-04-23", chegadas: 68 }, { data: "2025-04-24", chegadas: 53 }, { data: "2025-04-25", chegadas: 61 }, { data: "2025-04-28", chegadas: 64 }, { data: "2025-04-29", chegadas: 50 }, { data: "2025-04-30", chegadas: 3 } ],
                Maio: [ { data: "2025-05-01", chegadas: 6 }, { data: "2025-05-02", chegadas: 79 }, { data: "2025-05-05", chegadas: 72 }, { data: "2025-05-06", chegadas: 65 }, { data: "2025-05-07", chegadas: 65 }, { data: "2025-05-08", chegadas: 61 }, { data: "2025-05-09", chegadas: 51 }, { data: "2025-05-12", chegadas: 70 }, { data: "2025-05-13", chegadas: 58 }, { data: "2025-05-14", chegadas: 69 }, { data: "2025-05-15", chegadas: 50 }, { data: "2025-05-16", chegadas: 68 }, { data: "2025-05-17", chegadas: 1 }, { data: "2025-05-19", chegadas: 72 }, { data: "2025-05-20", chegadas: 59 }, { data: "2025-05-21", chegadas: 56 }, { data: "2025-05-22", chegadas: 48 }, { data: "2025-05-23", chegadas: 60 }, { data: "2025-05-26", chegadas: 73 }, { data: "2025-05-27", chegadas: 54 }, { data: "2025-05-28", chegadas: 58 }, { data: "2025-05-29", chegadas: 67 }, { data: "2025-05-30", chegadas: 5 }, { data: "2025-05-31", chegadas: 1 } ]
            }
        };

        // Dados para Eletrik (usando os mesmos dados como placeholder)
        const eletrikData = {
             resumoMensal: [
                { nome: "Janeiro", totalChegadas: 445 }, { nome: "Fevereiro", totalChegadas: 487 }, { nome: "Março", totalChegadas: 511 }, { nome: "Abril", totalChegadas: 497 }, { nome: "Maio", totalChegadas: 485 },
            ],
            detalhesMensais: {
                Janeiro: [ { data: "2025-01-02", chegadas: 8 }, { data: "2025-01-03", chegadas: 12 }, { data: "2025-01-06", chegadas: 16 }, { data: "2025-01-07", chegadas: 15 }, { data: "2025-01-08", chegadas: 21 }, { data: "2025-01-09", chegadas: 17 }, { data: "2025-01-10", chegadas: 13 }, { data: "2025-01-13", chegadas: 31 }, { data: "2025-01-15", chegadas: 18 }, { data: "2025-01-16", chegadas: 25 }, { data: "2025-01-17", chegadas: 29 }, { data: "2025-01-20", chegadas: 42 }, { data: "2025-01-21", chegadas: 19 }, { data: "2025-01-22", chegadas: 24 }, { data: "2025-01-23", chegadas: 28 }, { data: "2025-01-24", chegadas: 21 }, { data: "2025-01-27", chegadas: 33 }, { data: "2025-01-28", chegadas: 26 }, { data: "2025-01-29", chegadas: 22 }, { data: "2025-01-30", chegadas: 15 }, { data: "2025-01-31", chegadas: 10 } ],
                Fevereiro: [ { data: "2025-02-03", chegadas: 24 }, { data: "2025-02-04", chegadas: 21 }, { data: "2025-02-05", chegadas: 16 }, { data: "2025-02-06", chegadas: 35 }, { data: "2025-02-07", chegadas: 29 }, { data: "2025-02-10", chegadas: 30 }, { data: "2025-02-11", chegadas: 24 }, { data: "2025-02-12", chegadas: 23 }, { data: "2025-02-13", chegadas: 17 }, { data: "2025-02-14", chegadas: 25 }, { data: "2025-02-17", chegadas: 32 }, { data: "2025-02-18", chegadas: 27 }, { data: "2025-02-19", chegadas: 23 }, { data: "2025-02-20", chegadas: 29 }, { data: "2025-02-21", chegadas: 26 }, { data: "2025-02-24", chegadas: 28 }, { data: "2025-02-25", chegadas: 31 }, { data: "2025-02-26", chegadas: 24 }, { data: "2025-02-27", chegadas: 22 }, { data: "2025-02-28", chegadas: 1 } ],
                Março: [ { data: "2025-03-03", chegadas: 17 }, { data: "2025-03-04", chegadas: 14 }, { data: "2025-03-05", chegadas: 21 }, { data: "2025-03-06", chegadas: 24 }, { data: "2025-03-07", chegadas: 28 }, { data: "2025-03-10", chegadas: 27 }, { data: "2025-03-11", chegadas: 28 }, { data: "2025-03-12", chegadas: 28 }, { data: "2025-03-13", chegadas: 23 }, { data: "2025-03-14", chegadas: 17 }, { data: "2025-03-17", chegadas: 29 }, { data: "2025-03-18", chegadas: 42 }, { data: "2025-03-19", chegadas: 24 }, { data: "2025-03-20", chegadas: 27 }, { data: "2025-03-21", chegadas: 18 }, { data: "2025-03-24", chegadas: 26 }, { data: "2025-03-25", chegadas: 31 }, { data: "2025-03-26", chegadas: 29 }, { data: "2025-03-27", chegadas: 33 }, { data: "2025-03-28", chegadas: 25 }, { data: "2025-03-31", chegadas: 20 } ],
                Abril: [ { data: "2025-04-01", chegadas: 26 }, { data: "2025-04-02", chegadas: 23 }, { data: "2025-04-03", chegadas: 31 }, { data: "2025-04-04", chegadas: 25 }, { data: "2025-04-07", chegadas: 20 }, { data: "2025-04-08", chegadas: 21 }, { data: "2025-04-09", chegadas: 20 }, { data: "2025-04-10", chegadas: 25 }, { data: "2025-04-11", chegadas: 26 }, { data: "2025-04-14", chegadas: 30 }, { data: "2025-04-15", chegadas: 21 }, { data: "2025-04-16", chegadas: 31 }, { data: "2025-04-17", chegadas: 33 }, { data: "2025-04-22", chegadas: 24 }, { data: "2025-04-23", chegadas: 36 }, { data: "2025-04-24", chegadas: 25 }, { data: "2025-04-25", chegadas: 28 }, { data: "2025-04-28", chegadas: 27 }, { data: "2025-04-29", chegadas: 22 }, { data: "2025-04-30", chegadas: 23 } ],
                Maio: [ { data: "2025-05-02", chegadas: 23 }, { data: "2025-05-05", chegadas: 25 }, { data: "2025-05-06", chegadas: 22 }, { data: "2025-05-07", chegadas: 17 }, { data: "2025-05-08", chegadas: 31 }, { data: "2025-05-09", chegadas: 21 }, { data: "2025-05-12", chegadas: 27 }, { data: "2025-05-13", chegadas: 24 }, { data: "2025-05-14", chegadas: 23 }, { data: "2025-05-15", chegadas: 22 }, { data: "2025-05-16", chegadas: 19 }, { data: "2025-05-19", chegadas: 28 }, { data: "2025-05-20", chegadas: 27 }, { data: "2025-05-21", chegadas: 28 }, { data: "2025-05-22", chegadas: 19 }, { data: "2025-05-23", chegadas: 28 }, { data: "2025-05-26", chegadas: 31 }, { data: "2025-05-27", chegadas: 24 }, { data: "2025-05-28", chegadas: 25 }, { data: "2025-05-29", chegadas: 21 } ]
            }
        };

        let chartInstances = {};

        function setupDashboard(type, data) {
            const kpiTotal = document.getElementById(`kpi-total-${type}`);
            const kpiMediaMensal = document.getElementById(`kpi-media-mensal-${type}`);
            const kpiMediaDiaria = document.getElementById(`kpi-media-diaria-${type}`);
            const kpiMesPico = document.getElementById(`kpi-mes-pico-${type}`);
            const monthCardsContainer = document.getElementById(`month-cards-container-${type}`);
            const monthlyChartCanvas = document.getElementById(`monthlyChart-${type}`);
            const dailyChartCanvas = document.getElementById(`dailyChart-${type}`);
            const dailyChartMonth = document.getElementById(`daily-chart-month-${type}`);
            const tableMonth = document.getElementById(`table-month-${type}`);
            const detailsTable = document.getElementById(`details-table-${type}`);
            const tableAccordionHeader = document.getElementById(`table-accordion-header-${type}`);

            function updateDetails(monthName) {
                const monthData = data.detalhesMensais[monthName];
                dailyChartMonth.textContent = monthName;
                tableMonth.textContent = monthName;

                monthCardsContainer.querySelectorAll('.month-card').forEach(card => {
                    card.classList.toggle('active', card.dataset.month === monthName);
                });

                const dailyLabels = monthData.map(d => new Date(d.data).toLocaleDateString('pt-BR', { day: '2-digit', month: '2-digit' }));
                const dailyData = monthData.map(d => d.chegadas);

                if (chartInstances[`daily-${type}`]) {
                    chartInstances[`daily-${type}`].destroy();
                }
                const dailyCtx = dailyChartCanvas.getContext('2d');
                const gradient = dailyCtx.createLinearGradient(0, 0, 0, 350);
                gradient.addColorStop(0, 'rgba(220, 38, 38, 0.5)');
                gradient.addColorStop(1, 'rgba(220, 38, 38, 0)');

                chartInstances[`daily-${type}`] = new Chart(dailyCtx, {
                    type: 'line',
                    data: {
                        labels: dailyLabels,
                        datasets: [{
                            label: 'Nº de Chegadas',
                            data: dailyData,
                            borderColor: '#DC2626',
                            backgroundColor: gradient,
                            fill: true,
                            tension: 0.4,
                            pointBackgroundColor: '#DC2626',
                            pointHoverRadius: 6,
                            pointHoverBackgroundColor: '#FFFFFF'
                        }]
                    },
                    options: chartOptions
                });

                detailsTable.innerHTML = '';
                monthData.forEach(d => {
                    const row = `<tr class="border-b border-slate-600 hover:bg-slate-600"><td class="p-3">${new Date(d.data).toLocaleDateString('pt-BR')}</td><td class="p-3">${d.chegadas}</td></tr>`;
                    detailsTable.innerHTML += row;
                });
            }

            const totalChegadas = data.resumoMensal.reduce((sum, mes) => sum + mes.totalChegadas, 0);
            const totalDias = Object.values(data.detalhesMensais).reduce((sum, mes) => sum + mes.length, 0);
            const mediaMensal = totalChegadas / data.resumoMensal.length;
            const mediaDiaria = totalChegadas / totalDias;
            const mesPico = data.resumoMensal.reduce((max, mes) => mes.totalChegadas > max.totalChegadas ? mes : max);

            kpiTotal.textContent = totalChegadas.toLocaleString('pt-BR');
            kpiMediaMensal.textContent = mediaMensal.toFixed(1).replace('.', ',');
            kpiMediaDiaria.textContent = mediaDiaria.toFixed(1).replace('.', ',');
            kpiMesPico.textContent = mesPico.nome;

            monthCardsContainer.innerHTML = '';
            data.resumoMensal.forEach(mes => {
                const card = `<div class="month-card kpi-card p-4 rounded-xl cursor-pointer text-center" data-month="${mes.nome}"><h3 class="text-sm font-medium text-slate-400">${mes.nome}</h3><p class="text-3xl font-bold text-white mt-1">${mes.totalChegadas}</p></div>`;
                monthCardsContainer.innerHTML += card;
            });
            
            monthCardsContainer.querySelectorAll('.month-card').forEach(card => {
                card.addEventListener('click', () => updateDetails(card.dataset.month));
            });

            const monthlyLabels = data.resumoMensal.map(d => d.nome);
            const monthlyData = data.resumoMensal.map(d => d.totalChegadas);
            
            if (chartInstances[`monthly-${type}`]) {
                chartInstances[`monthly-${type}`].destroy();
            }
            chartInstances[`monthly-${type}`] = new Chart(monthlyChartCanvas, {
                type: 'bar',
                data: {
                    labels: monthlyLabels,
                    datasets: [{
                        label: 'Nº de Chegadas',
                        data: monthlyData,
                        backgroundColor: '#B91C1C',
                        borderColor: '#F87171',
                        borderWidth: 1,
                        borderRadius: 4
                    }]
                },
                options: { ...chartOptions, onClick: (e, elements) => { if (elements.length > 0) { updateDetails(monthlyLabels[elements[0].index]); } } }
            });

            tableAccordionHeader.addEventListener('click', function() {
                this.parentElement.classList.toggle('active');
            });

            updateDetails(data.resumoMensal[0].nome);
        }

        const chartOptions = {
            maintainAspectRatio: false,
            responsive: true,
            plugins: { legend: { display: false } },
            scales: {
                y: { beginAtZero: true, grid: { color: 'rgba(255, 255, 255, 0.1)' }, ticks: { color: '#94a3b8' } },
                x: { grid: { color: 'rgba(255, 255, 255, 0.05)' }, ticks: { color: '#94a3b8' } }
            }
        };

        // Setup Tabs
        const tabs = document.querySelectorAll('.tab');
        const tabContents = document.querySelectorAll('.tab-content');
        tabs.forEach(tab => {
            tab.addEventListener('click', () => {
                tabs.forEach(item => item.classList.remove('active'));
                tab.classList.add('active');
                const target = tab.getAttribute('data-tab');
                tabContents.forEach(content => {
                    content.classList.toggle('active', content.id === target);
                });
            });
        });

        setupDashboard('multi', multiData);
        setupDashboard('eletrik', eletrikData);
    </script>

</body>
</html>

